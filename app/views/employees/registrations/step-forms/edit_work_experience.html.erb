<%= turbo_frame_tag "step_form" do %>
  <div class="container">
	  <%= form_for(resource, as: resource_name, url: registration_path(resource_name, step: @step), html: { method: :put, data: { controller: "url-update", turbo_frame: "step_form" } }) do |f| %>
	    <!-- Form fields specific to the step -->
	    <div class="card">
		  	<div class="card-body">
		  		<h4>Work Experenices</h4>
		      <div class="mt-3" data-controller="nested-form">
					  <div id="work_experiences-list">
					    <% if @employee.work_experiences.any? %>
					      <%= f.fields_for :work_experiences do |work_form, index| %>
					        <div data-nested-form-target="workExperienceRecords">
					          <%= render 'employees/registrations/nested-forms/work_experience_fields', f: work_form, id: index %>
					        </div>
					      <% end %>
					    <% else %>
					      <div class="alert alert-success alert-work">
					        <p class="mb-0">Please add a work experience record.</p>
					      </div>
					    <% end %>
					  </div>
					  <div class="d-flex justify-content-end mt-3">
					    <%= link_to 'Add Work', '#', class: 'btn btn-primary', data: { action: 'click->nested-form#addWork' } %>
					  </div>
					  <%= render 'employees/registrations/nested-forms/work_experience_template' %>
					</div>
			    <div class="d-flex">
						<div>
							<% if @previous_step %>
							  <%= link_to 'Previous', edit_employee_registration_path(step: @previous_step), class: 'btn btn-secondary', data: { turbo: false } %>
							<% end %>
		    		</div>
			    	<div class="ms-3">
			        <%= f.submit "Next", class: "btn btn-primary" %>
			    	</div>
			    </div>
			  </div>
			</div>    
	  <% end %>
	</div>
<% end %>

<%= content_for :title, 'Edit Profile' %>

<div class="container">
  <div class="row mb-5">
    <div class="col-md-6">
      <h4>Complete your profile</h4>
    </div>
    <div class="col-md-6 text-end">
      <%= link_to 'Back to home', root_path, class: 'btn btn-primary' %>
    </div>
  </div>

  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
    
    <%= render 'shared/flash' %>
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="profile-tab" data-bs-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="true">Profile Information</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="education-tab" data-bs-toggle="tab" href="#education" role="tab" aria-controls="education" aria-selected="false">Education Record</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="work-tab" data-bs-toggle="tab" href="#work" role="tab" aria-controls="work" aria-selected="false">Work Experience</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="hobby-tab" data-bs-toggle="tab" href="#hobby" role="tab" aria-controls="hobby" aria-selected="false">Hobby</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="skill-tab" data-bs-toggle="tab" href="#skill" role="tab" aria-controls="skill" aria-selected="false">Skill</a>
      </li>
    </ul>

    <!-- Tab content -->
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        <div class="mt-3">
          <div class="card mb-4">
            <div class="card-body">
              <div class="mb-3">
                <%= f.label :first_name, class: "form-label" %>
                <%= f.text_field :first_name, class: "form-control", autofocus: true %>
              </div>
              <div class="mb-3">
                <%= f.label :last_name, class: "form-label" %>
                <%= f.text_field :last_name, class: "form-control" %>
              </div>
              <div class="mb-3">
                <%= f.label :email, class: "form-label" %>
                <%= f.email_field :email, class: "form-control", autocomplete: "email" %>
              </div>
              <div class="mb-3">
                <%= f.label :contact_number, class: "form-label" %>
                <%= f.text_field :contact_number, class: "form-control" %>
              </div>
              <div class="mb-3">
                <%= f.label :job_title, class: "form-label" %>
                <%= f.text_field :job_title, class: "form-control" %>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-pane fade" id="education" role="tabpanel" aria-labelledby="education-tab">
        <div class="mt-3" data-controller="nested-form">
          <div id="education_records-list">
            <%= f.fields_for :education_records do |education_form, index| %>
              <div data-nested-form-target='educationRecords'>
                <%= render 'education_record_fields', f: education_form, id: index %>
              </div>
            <% end %>
          </div>
          <div class="d-flex justify-content-end mt-3">
            <%= link_to 'Add Education Record', '#', class: 'btn btn-primary', data: { action: 'click->nested-form#addEducation' } %>
          </div>
          <%= render 'education_record_template' %>
        </div>
      </div>

      <div class="tab-pane fade" id="work" role="tabpanel" aria-labelledby="work-tab">
        <div class="mt-3" data-controller="nested-form">
          <div id="work_experiences-list">
            <%= f.fields_for :work_experiences do |work_form, index| %>
              <div data-nested-form-target='workExperienceRecords'>
                <%= render 'work_experience_fields', f: work_form, id: index %>
              </div>
            <% end %>
          </div>
          <div class="d-flex justify-content-end mt-3">
            <%= link_to 'Add Work', '#', class: 'btn btn-primary', data: { action: 'click->nested-form#addWork' } %>
          </div>
          <%= render 'work_experience_template' %>
        </div>
      </div>

      <div class="tab-pane fade" id="hobby" role="tabpanel" aria-labelledby="hobby-tab">
        <div class="mt-3">
          <div class="d-flex flex-wrap">
            <%= f.collection_check_boxes :hobby_ids, Hobby.all, :id, :name do |b| %>
              <div class="form-check me-3 mb-2">
                <%= b.check_box(class: 'form-check-input') %>
                <%= b.label(class: 'form-check-label') %>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <div class="tab-pane fade" id="skill" role="tabpanel" aria-labelledby="skill-tab">
        <div class="mt-3">
          <div class="d-flex flex-wrap">
            <%= f.collection_check_boxes :skill_ids, Skill.all, :id, :name do |b| %>
              <div class="form-check me-3 mb-2">
                <%= b.check_box(class: 'form-check-input') %>
                <%= b.label(class: 'form-check-label') %>
              </div>
            <% end %>
          </div>
        </div>

        <div class="mb-3 mt-5">
          <%= f.submit "Send Data", class: "btn btn-primary" %>
        </div>
      </div>
    </div>
  <% end %>
</div>

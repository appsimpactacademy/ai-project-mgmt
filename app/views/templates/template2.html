<html>
  <head>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: 'Roboto', sans-serif;
        background-color: #fff;
        color: #333;
        font-size: 18px;
        line-height: 20px;
        letter-spacing: 1px;
      }

      .header {
        background-color: #2c3e50;
        color: white;
        padding: 20px;
        border-radius: 10px;
        position: relative;
      }

      .container {
        background: #fff;
        margin: 0 auto;
        box-shadow: none;
        border-radius: 3px;
        padding: 40px 40px 0px 40px;
      }

      .header h1 {
        font-size: 2em;
        margin: 0;
      }

      .header h2 {
        font-size: 1.2em;
        font-weight: 400;
        margin: 5px 0 20px;
      }

      .header .contact-info {
        position: absolute;
        top: 20px;
        right: 20px;
        text-align: right;
      }

      .header .contact-info p {
        margin: 0 0;
      }

      .header .profile-pic {
        position: absolute;
        bottom: -40px;
        right: 20px;
        border-radius: 50%;
        border: 5px solid #2c3e50;
      }

      .section-title {
        font-size: 1.5em;
        margin-top: 60px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
      }

      .section-title i {
        margin-right: 10px;
      }

      .work-experience,
      .skills,
      .courses,
      .certificates,
      .education,
      .languages {
        margin-bottom: 40px;
      }

      .work-experience h3,
      .skills h3,
      .courses h3,
      .certificates h3,
      .education h3,
      .languages h3 {
        font-size: 1.2em;
        margin-bottom: 10px;
      }

      .work-experience p,
      .skills p,
      .courses p,
      .certificates p,
      .education p,
      .languages p {
        margin: 0;
      }

      .skills .badge {
        background-color: #333;
        color: white;
        margin: 5px;
        padding: 10px;
        font-size: 0.9em;
      }

      .courses a,
      .certificates a {
        color: #3498db;
        text-decoration: none;
      }

      .courses a:hover,
      .certificates a:hover {
        text-decoration: underline;
      }

      .truncate {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    </style>
  </head>
  <body>
    <div class="container border">
      <div class="header">
        <h1> <%= @employee.full_name %></h1>
        <h2> <%= @employee.job_title %> </h2>
        <p class="col-md-8" style="width: 66.66666667%; margin-top: 30px; margin-right: 100px;">
          <%= @employee.about %>
        </p>
        <div class="contact-info">
          <p>
            <i class="fas fa-envelope"></i> <%= @employee.email %>
          </p>
          <p>
            <i class="fas fa-phone"></i> <%= @employee.contact_number %>
          </p>
          <p>
            <i class="fab fa-linkedin me-2"></i>linkedin.com/in/rachel.johnson
          </p>
          <p>
            <i class="fab fa-twitter"></i> @rachel.johnson
          </p>
        </div>
       <div style="width: 100px; height: 100px;position: absolute;right: 40px;top:11.5rem;">
          <img 
            src="<%= rails_blob_url(@employee.profile_image) %>" 
            style="width: 100%; height: 100%; object-fit: cover;border-radius: 50px;" 
          />
        </div>
      </div>
      
      <!-- Work Experience -->
      <div class="work-experience">
        <div class="section-title">
          <i class="fas fa-briefcase"></i>
          <span>WORK EXPERIENCE</span>
        </div>
        <% @employee.work_experiences.each do |work_exp| %>
          <h3 class="mt-3 mb-2"><%= work_exp.company_name %> - <%= work_exp.job_title %></h3>
          <p><%= work_exp.start_date&.strftime("%b %Y") %> - <%= work_exp.end_date.present? ? work_exp.end_date.strftime("%b %Y") : 'Present' %></p>
          <p><strong>Role:</strong> <%= work_exp.role %></p>
          <p><%= work_exp.description %></p>
        <% end %>
      </div>

      <!-- Education -->
      <div class="education">
        <div class="section-title">
          <i class="fas fa-graduation-cap"></i>
          <span>EDUCATION</span>
        </div>
        <% @employee.education_records.each do |education| %>
          <h3 class="mt-3 mb-2"><%= education.course_name %></h3>
          <p><%= education.college_or_university %>, <%= education.start_year %> - <%= education.end_year || 'Present' %></p>
          <p><strong>Status:</strong> <%= education.is_pursuing ? 'Currently studying' : 'Completed' %></p>
        <% end %>
      </div>

      <!-- Projects -->
      <% if @employee.projects.present? %>
        <div class="projects">
          <div class="section-title">
            <i class="fas fa-project-diagram"></i>
            <span>PROJECTS</span>
          </div>
          <% @employee.projects.each do |project| %>
            <h3 class="mt-3 mb-2"><%= project.title %></h3>
            <p class="mb-0"><%= project.start_date&.strftime("%b %Y") %> - <%= project.end_date.present? ? project.end_date.strftime("%b %Y") : 'Ongoing' %></p>
            <p><strong>Status:</strong> <%= project.end_date.present? ? 'Completed' : 'Currently Working' %></p>
          <% end %>
        </div>
      <% end %>

      <!-- Skills -->
      <div class="skills">
        <div class="section-title">
          <i class="fas fa-tools"></i>
          <span>SKILLS</span>
        </div>
        <% @employee.skills.each do |skill| %>
          <span class="badge" style="border-radius: 5px;"><%= skill.name %></span>
        <% end %>
      </div>

      <!-- Interests -->
      <div class="section mb-3">
        <div class="section-title">
          <i class="fas fa-heart"></i>
          <span>INTERESTS</span>
        </div>
        <div class="hobbies">
          <%= @employee.hobbies.map(&:name).join(', ') %>
        </div>
      </div>
    </div>
  </body>
</html>
